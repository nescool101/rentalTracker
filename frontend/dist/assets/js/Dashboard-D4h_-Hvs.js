import{j as e,C as b,a as d,b as r,m as M,o as k,G as I,S as A,R as q,P as C,p as a,q as l,T as o}from"./mantine-vendor-D4AgWXPI.js";import{u as c}from"./utils-vendor-CNi8B-Rx.js";import{p as P,a as w,r as D}from"./apiService-758Vinm-.js";import{c as g,u as R,I as T}from"./index-cX4OG7Q0.js";import{I as B}from"./IconUserCircle-5qOnJh3A.js";import{I as F}from"./IconCreditCard-q0lNzg_i.js";import{L as t}from"./react-vendor-Q26-omST.js";/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var G=g("outline","building-community","IconBuildingCommunity",[["path",{d:"M8 9l5 5v7h-5v-4m0 4h-5v-7l5 -5m1 1v-6a1 1 0 0 1 1 -1h10a1 1 0 0 1 1 1v17h-8",key:"svg-0"}],["path",{d:"M13 7l0 .01",key:"svg-1"}],["path",{d:"M17 7l0 .01",key:"svg-2"}],["path",{d:"M17 11l0 .01",key:"svg-3"}],["path",{d:"M17 15l0 .01",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var H=g("outline","home-cog","IconHomeCog",[["path",{d:"M9 21v-6a2 2 0 0 1 2 -2h1.6",key:"svg-0"}],["path",{d:"M20 11l-8 -8l-9 9h2v7a2 2 0 0 0 2 2h4.159",key:"svg-1"}],["path",{d:"M18 18m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-2"}],["path",{d:"M18 14.5v1.5",key:"svg-3"}],["path",{d:"M18 20v1.5",key:"svg-4"}],["path",{d:"M21.032 16.25l-1.299 .75",key:"svg-5"}],["path",{d:"M16.27 19l-1.3 .75",key:"svg-6"}],["path",{d:"M14.97 16.25l1.3 .75",key:"svg-7"}],["path",{d:"M19.733 19l1.3 .75",key:"svg-8"}]]);function Q(){const{user:i}=R(),n=(i==null?void 0:i.role)==="admin"||(i==null?void 0:i.role)==="manager",{data:j=[]}=c({queryKey:["persons","all","dashboard"],queryFn:P.getAll,enabled:n}),{data:v=[]}=c({queryKey:["properties","all","dashboard"],queryFn:w.getAll,enabled:n}),{data:m=[]}=c({queryKey:["rentals","all","dashboard"],queryFn:D.getAll,enabled:n});let h=[],p=[],u=[];return n&&(h=m.filter(s=>new Date(s.end_date)>new Date),p=m.filter(s=>{const y=new Date(s.end_date),f=new Date,z=y.getTime()-f.getTime(),x=Math.ceil(z/(1e3*3600*24));return x<=30&&x>0}),u=[{title:"Total Propiedades",value:v.length,color:"blue"},{title:"Alquileres Activos",value:h.length,color:"green"},{title:"Renovaciones Pendientes",value:p.length,color:"orange"},{title:"Total Personas",value:j.length,color:"grape"}]),e.jsxs(b,{size:"xl",children:[e.jsx(d,{order:1,mb:"lg",children:"Panel Principal"}),n?e.jsxs(e.Fragment,{children:[e.jsx(r,{mb:"md",children:"Bienvenido a tu Panel de Gestión de Alquileres. Aquí tienes un resumen rápido:"}),e.jsx(M,{cols:{base:1,sm:2,md:4},spacing:"lg",mb:"xl",children:u.map(s=>e.jsx(k,{withBorder:!0,padding:"lg",radius:"md",shadow:"sm",children:e.jsxs(I,{justify:"space-between",align:"flex-start",children:[e.jsxs(A,{gap:0,children:[e.jsx(r,{fz:"lg",fw:500,children:s.title}),e.jsx(d,{order:3,children:s.value})]}),e.jsx(q,{size:80,thickness:8,roundCaps:!0,sections:[{value:s.value>0?100:0,color:s.color}]})]})},s.title))})]}):e.jsxs(e.Fragment,{children:[e.jsx(r,{mb:"md",c:"dimmed",children:"Bienvenido a tu portal personal. Desde aquí puedes acceder a tu información y servicios:"}),e.jsxs(C,{withBorder:!0,p:"xl",radius:"md",shadow:"sm",mt:"lg",children:[e.jsx(d,{order:3,mb:"lg",children:"Accesos Rápidos"}),e.jsxs(a,{spacing:"lg",size:"sm",children:[e.jsxs(a.Item,{icon:e.jsx(o,{color:"blue",size:24,radius:"xl",children:e.jsx(B,{size:"1rem"})}),children:[e.jsx(l,{component:t,to:"/persons",fz:"sm",children:"Mi Perfil"}),e.jsx(r,{c:"dimmed",fz:"xs",children:"Ver y actualizar tu información personal."})]}),e.jsxs(a.Item,{icon:e.jsx(o,{color:"teal",size:24,radius:"xl",children:e.jsx(G,{size:"1rem"})}),children:[e.jsx(l,{component:t,to:"/properties",fz:"sm",children:"Detalles de mi Propiedad"}),e.jsx(r,{c:"dimmed",fz:"xs",children:"Información sobre tu unidad alquilada."})]}),e.jsxs(a.Item,{icon:e.jsx(o,{color:"cyan",size:24,radius:"xl",children:e.jsx(H,{size:"1rem"})}),children:[e.jsx(l,{component:t,to:"/maintenance",fz:"sm",children:"Solicitudes de Mantenimiento"}),e.jsx(r,{c:"dimmed",fz:"xs",children:"Enviar y rastrear solicitudes de reparaciones."})]}),e.jsxs(a.Item,{icon:e.jsx(o,{color:"grape",size:24,radius:"xl",children:e.jsx(F,{size:"1rem"})}),children:[e.jsx(l,{component:t,to:"/payments",fz:"sm",children:"Mis Pagos"}),e.jsx(r,{c:"dimmed",fz:"xs",children:"Ver tu historial de pagos y próximos vencimientos."})]}),e.jsxs(a.Item,{icon:e.jsx(o,{color:"orange",size:24,radius:"xl",children:e.jsx(T,{size:"1rem"})}),children:[e.jsx(l,{component:t,to:"/rental-history",fz:"sm",children:"Historial de Alquiler"}),e.jsx(r,{c:"dimmed",fz:"xs",children:"Detalles de tus contratos pasados y actuales."})]})]})]})]})]})}export{Q as default};
