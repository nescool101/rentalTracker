import{j as e,C as y,a as n,m as z,P as C,o as m,S as h,b as i,B as _,G as M,R as D,T as r,p as c}from"./mantine-vendor-Bripv_3X.js";import{u as p}from"./utils-vendor-tZ1hTSV2.js";import{p as P,a as T,r as w}from"./apiService-19GZqUtM.js";import{c as u,u as B,I as N,b as G,d as S,e as R}from"./index-BGAR1JXy.js";import{I as L}from"./IconUserCircle-BD2Poat0.js";import{L as l}from"./react-vendor-Cmr1RT9l.js";/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var F=u("outline","building-community","IconBuildingCommunity",[["path",{d:"M8 9l5 5v7h-5v-4m0 4h-5v-7l5 -5m1 1v-6a1 1 0 0 1 1 -1h10a1 1 0 0 1 1 1v17h-8",key:"svg-0"}],["path",{d:"M13 7l0 .01",key:"svg-1"}],["path",{d:"M17 7l0 .01",key:"svg-2"}],["path",{d:"M17 11l0 .01",key:"svg-3"}],["path",{d:"M17 15l0 .01",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var H=u("outline","home-cog","IconHomeCog",[["path",{d:"M9 21v-6a2 2 0 0 1 2 -2h1.6",key:"svg-0"}],["path",{d:"M20 11l-8 -8l-9 9h2v7a2 2 0 0 0 2 2h4.159",key:"svg-1"}],["path",{d:"M18 18m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-2"}],["path",{d:"M18 14.5v1.5",key:"svg-3"}],["path",{d:"M18 20v1.5",key:"svg-4"}],["path",{d:"M21.032 16.25l-1.299 .75",key:"svg-5"}],["path",{d:"M16.27 19l-1.3 .75",key:"svg-6"}],["path",{d:"M14.97 16.25l1.3 .75",key:"svg-7"}],["path",{d:"M19.733 19l1.3 .75",key:"svg-8"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var E=u("outline","settings","IconSettings",[["path",{d:"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z",key:"svg-0"}],["path",{d:"M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-1"}]]);const K="_dashboardContainer_17pno_3",U="_statsGrid_17pno_9",V="_statCard_17pno_15",W="_quickAccessGrid_17pno_28",O="_quickAccessCard_17pno_34",Q="_alertContainer_17pno_48",J="_pendingCard_17pno_52",X="_quickAccessList_17pno_60",Y="_listItem_17pno_64",Z="_listItemIcon_17pno_81",$="_listItemContent_17pno_86",ee="_listItemTitle_17pno_91",se="_listItemDescription_17pno_99",s={dashboardContainer:K,statsGrid:U,statCard:V,quickAccessGrid:W,quickAccessCard:O,alertContainer:Q,pendingCard:J,quickAccessList:X,listItem:Y,listItemIcon:Z,listItemContent:$,listItemTitle:ee,listItemDescription:se};function ce(){const{user:t}=B(),o=(t==null?void 0:t.role)==="admin"||(t==null?void 0:t.role)==="manager",d=(t==null?void 0:t.status)==="activenopaid",{data:f=[]}=p({queryKey:["persons","all","dashboard"],queryFn:P.getAll,enabled:o&&!d}),{data:A=[]}=p({queryKey:["properties","all","dashboard"],queryFn:T.getAll,enabled:o&&!d}),{data:x=[]}=p({queryKey:["rentals","all","dashboard"],queryFn:w.getAll,enabled:o&&!d});let j=[],v=[],g=[];return o&&!d&&(j=x.filter(a=>new Date(a.end_date)>new Date),v=x.filter(a=>{const b=new Date(a.end_date),k=new Date,q=b.getTime()-k.getTime(),I=Math.ceil(q/(1e3*3600*24));return I<=30&&I>0}),g=[{title:"Total Propiedades",value:A.length,color:"blue"},{title:"Alquileres Activos",value:j.length,color:"green"},{title:"Renovaciones Pendientes",value:v.length,color:"orange"},{title:"Total Personas",value:f.length,color:"grape"}]),d?e.jsxs(y,{size:"xl",className:s.dashboardContainer,children:[e.jsx(n,{order:1,mb:"lg",children:"Panel Principal"}),e.jsx("div",{className:s.alertContainer,children:e.jsx(z,{icon:e.jsx(N,{size:24}),title:"Cuenta pendiente de activación",color:"yellow",variant:"filled",children:"Tu cuenta está pendiente de activación por el administrador. Mientras tanto, tienes acceso limitado al sistema."})}),e.jsxs(C,{withBorder:!0,radius:"md",shadow:"sm",className:s.pendingCard,children:[e.jsx(n,{order:3,mb:"lg",children:"Acciones Disponibles"}),e.jsxs("div",{className:s.quickAccessGrid,children:[e.jsx(m,{withBorder:!0,radius:"md",className:s.quickAccessCard,children:e.jsxs(h,{align:"center",children:[e.jsx(E,{size:32,color:"blue"}),e.jsx(n,{order:4,children:"Administrar Perfil"}),e.jsx(i,{size:"sm",ta:"center",children:"Puedes cambiar tu contraseña y verificar tus datos personales"}),e.jsx(_,{component:l,to:"/profile",variant:"light",color:"blue",mt:"auto",fullWidth:!0,children:"Ir a Mi Perfil"})]})}),e.jsx(m,{withBorder:!0,radius:"md",className:s.quickAccessCard,children:e.jsxs(h,{align:"center",children:[e.jsx(N,{size:32,color:"orange"}),e.jsx(n,{order:4,children:"Contactar Soporte"}),e.jsx(i,{size:"sm",ta:"center",children:"Si necesitas ayuda o quieres consultar el estado de tu activación"}),e.jsx(_,{component:"a",href:"mailto:nescool101@gmail.com?subject=Activación%20de%20cuenta",variant:"light",color:"orange",mt:"auto",fullWidth:!0,children:"Enviar Correo"})]})})]})]}),e.jsx(i,{mt:"xl",size:"sm",c:"dimmed",ta:"center",children:"Una vez que tu cuenta sea activada, tendrás acceso a todas las funcionalidades del sistema."})]}):e.jsxs(y,{size:"xl",className:s.dashboardContainer,children:[e.jsx(n,{order:1,mb:"lg",children:"Panel Principal"}),o?e.jsxs(e.Fragment,{children:[e.jsx(i,{mb:"md",children:"Bienvenido a tu Panel de Gestión de Alquileres. Aquí tienes un resumen rápido:"}),e.jsx("div",{className:s.statsGrid,children:g.map(a=>e.jsx(m,{withBorder:!0,radius:"md",shadow:"sm",className:s.statCard,children:e.jsxs(M,{justify:"space-between",align:"flex-start",children:[e.jsxs(h,{gap:0,children:[e.jsx(i,{fz:"lg",fw:500,children:a.title}),e.jsx(n,{order:3,children:a.value})]}),e.jsx(D,{size:80,thickness:8,roundCaps:!0,sections:[{value:a.value>0?100:0,color:a.color}]})]})},a.title))})]}):e.jsxs(e.Fragment,{children:[e.jsx(i,{mb:"md",c:"dimmed",children:"Bienvenido a tu portal personal. Desde aquí puedes acceder a tu información y servicios:"}),e.jsxs(C,{withBorder:!0,radius:"md",shadow:"sm",className:s.quickAccessList,children:[e.jsx(n,{order:3,mb:"lg",style:{padding:"24px 24px 0 24px"},children:"Accesos Rápidos"}),e.jsxs("div",{style:{padding:"0 24px 24px 24px"},children:[e.jsxs("div",{className:s.listItem,children:[e.jsx("div",{className:s.listItemIcon,children:e.jsx(r,{color:"blue",size:32,radius:"xl",children:e.jsx(L,{size:"1.2rem"})})}),e.jsxs("div",{className:s.listItemContent,children:[e.jsx(c,{component:l,to:"/profile",className:s.listItemTitle,children:"Mi Perfil"}),e.jsx(i,{className:s.listItemDescription,children:"Ver y actualizar tu información personal."})]})]}),e.jsxs("div",{className:s.listItem,children:[e.jsx("div",{className:s.listItemIcon,children:e.jsx(r,{color:"teal",size:32,radius:"xl",children:e.jsx(F,{size:"1.2rem"})})}),e.jsxs("div",{className:s.listItemContent,children:[e.jsx(c,{component:l,to:"/properties",className:s.listItemTitle,children:"Detalles de mi Propiedad"}),e.jsx(i,{className:s.listItemDescription,children:"Información sobre tu unidad alquilada."})]})]}),e.jsxs("div",{className:s.listItem,children:[e.jsx("div",{className:s.listItemIcon,children:e.jsx(r,{color:"cyan",size:32,radius:"xl",children:e.jsx(H,{size:"1.2rem"})})}),e.jsxs("div",{className:s.listItemContent,children:[e.jsx(c,{component:l,to:"/maintenance",className:s.listItemTitle,children:"Solicitudes de Mantenimiento"}),e.jsx(i,{className:s.listItemDescription,children:"Enviar y rastrear solicitudes de reparaciones."})]})]}),e.jsxs("div",{className:s.listItem,children:[e.jsx("div",{className:s.listItemIcon,children:e.jsx(r,{color:"grape",size:32,radius:"xl",children:e.jsx(G,{size:"1.2rem"})})}),e.jsxs("div",{className:s.listItemContent,children:[e.jsx(c,{component:l,to:"/payments",className:s.listItemTitle,children:"Mis Pagos"}),e.jsx(i,{className:s.listItemDescription,children:"Ver tu historial de pagos y próximos vencimientos."})]})]}),e.jsxs("div",{className:s.listItem,children:[e.jsx("div",{className:s.listItemIcon,children:e.jsx(r,{color:"orange",size:32,radius:"xl",children:e.jsx(S,{size:"1.2rem"})})}),e.jsxs("div",{className:s.listItemContent,children:[e.jsx(c,{component:l,to:"/rental-history",className:s.listItemTitle,children:"Historial de Alquiler"}),e.jsx(i,{className:s.listItemDescription,children:"Detalles de tus contratos pasados y actuales."})]})]}),e.jsxs("div",{className:s.listItem,children:[e.jsx("div",{className:s.listItemIcon,children:e.jsx(r,{color:"indigo",size:32,radius:"xl",children:e.jsx(R,{size:"1.2rem"})})}),e.jsxs("div",{className:s.listItemContent,children:[e.jsx(c,{component:l,to:"/file-upload",className:s.listItemTitle,children:"Subir Archivos"}),e.jsx(i,{className:s.listItemDescription,children:"Subir documentos y archivos relacionados con tu alquiler."})]})]})]})]})]})]})}export{ce as default};
